<h3>Create admin</h3>

<form [formGroup]="form" (ngSubmit)="submit()">
  <div>
    <label>Email</label>
    <input formControlName="email" placeholder="Enter admin email">
    @if(form.controls.email.touched && form.controls.email.invalid)
    {
      <div>
        @if(form.controls.email.errors?.['required'])
        {
          Email is required
        }
        @if(form.controls.email.errors?.['email'])
        {
          Invalid email format
        }
      </div>
    }
  </div>

  <div>
    <label>Username</label>
    <input formControlName="username" placeholder="Enter admin username">
    @if(form.controls.username.touched && form.controls.username.invalid)
    {
      <div>
        @if(form.controls.username.errors?.['required'])
        {
          Username is required
        }
        @if(form.controls.username.errors?.['minlength'])
        {
          Username must be at least 6 characters
        }
      </div>
    }
  </div>

  <div>
    <label>Password</label>
    <input type="password" formControlName="password" placeholder="Enter admin password">
    @if(form.controls.password.touched && form.controls.password.invalid){
      <div>
        @if(form.controls.password.errors?.['required'])
        {
          Password is required
        }
        @if(form.controls.password.errors?.['minlength'])
        {
          Password must be at least 6 characters
        }
      </div>
    }
  </div>
  @if(errorMessage)
  {
    <div>
      {{errorMessage}}
    </div>
  }

  <button type="submit" [disabled]="form.invalid || loading">
    Create admin
  </button>
</form>

@if (message) {
  <div>{{ message }}</div>
}