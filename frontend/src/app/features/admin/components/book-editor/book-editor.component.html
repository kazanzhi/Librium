<h3>Book Editor</h3>

<form [formGroup]="form" (ngSubmit)="submit()">
  <div>
    <label for="title">Title:</label>
    <input id="title" formControlName="title" />
  </div>

  <div>
    <label for="author">Author:</label>
    <input id="author" formControlName="author" />
  </div>

  <div>
    <label for="content">Content:</label>
    <textarea id="content" formControlName="content"></textarea>
  </div>

  <div>
    <label for="publishedYear">Published Year:</label>
    <input id="publishedYear" type="number" formControlName="publishedYear" />
  </div>

  <button type="submit" [disabled]="form.invalid || loading">
    {{ book ? 'Update Book' : 'Create Book' }}
  </button>

</form>

@if (book) {
  <button
    type="button"
    (click)="delete()"
    [disabled]="loading">
    Delete Book
  </button>
}

@if (book) {
  <div>
    <ul>
      @for (c of book.categories; track c) {
        <li>
          {{ c }}
          <button type="button" (click)="removeCategory(c)">
            Remove
          </button>
        </li>
      }
    </ul>
  </div>
}

@if (book) {
  <div>
    <label>Add category:</label>
    <select #selectedCategory>
      @for (c of categories; track c) {
        <option [value]="c.name">
          {{ c.name }}
        </option>
      }
    </select>
    <button
      type="button"
      (click)="addCategory(selectedCategory.value)">
      Add
    </button>
  </div>
}