<div>
  <h2>Admin</h2>

  <button (click)="showAdminCreation = !showAdminCreation">Admin creation</button>
  @if (showAdminCreation) {
    <app-admin-creation></app-admin-creation>
  }

  @if (loading) {
    <div>loading...</div>
  }

  <hr>
  <h4>Search a book</h4>
  <input type="text" placeholder="Search book..." (input) = "onSearch($event.target.value)">
  @if (!loading) {
    <div>
      
      @if (errorBookMessage) {
        <div>
          {{ errorBookMessage }}
        </div>
      }
      <ul>
        @for (book of books; track book) {
          <li>
            {{ book.title }} â€” {{ book.author }}
            <button (click)="edit(book)">Edit</button>
          </li>
        }
      </ul>
      @if (!showManageBooks) {
        <button (click)="createNew()">Create Book</button>
      }
      @if (showManageBooks) 
      {
        <app-book-editor
          [book]="selectedBook"
          [categories]="categories"
          (saved)="onBookSaved()">
        </app-book-editor>
      }
    </div>
  }

  <hr>
  @if (errorCategoryMessage) {
    <div class="error">
      {{ errorCategoryMessage }}
    </div>
  }
  <button (click)="showManageCategories = !showManageCategories">Manage Categories</button>
  @if (showManageCategories) 
  {
    <app-category-editor [categories]="categories" (saved)="loadCategories()"></app-category-editor>
  }
  
</div>  