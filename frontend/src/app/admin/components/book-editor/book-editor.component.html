<h3>Book Editor</h3>

<form [formGroup]="form" (ngSubmit)="submit()">
  <div>
    <label for="title">Title:</label>
    <input id="title" formControlName="title" />
  </div>

  <div>
    <label for="author">Author:</label>
    <input id="author" formControlName="author" />
  </div>

  <div>
    <label for="content">Content:</label>
    <textarea id="content" formControlName="content"></textarea>
  </div>

  <div>
    <label for="publishedYear">Published Year:</label>
    <input id="publishedYear" type="number" formControlName="publishedYear" />
  </div>

  <button type="submit" [disabled]="form.invalid || loading">
    {{ book ? 'Update Book' : 'Create Book' }}
  </button>

</form>

<button
  *ngIf="book"
  type="button"
  (click)="delete()"
  [disabled]="loading">
  Delete Book
</button>

<div *ngIf="book">
  <ul>
    <li *ngFor="let c of book.categories">
      {{ c }}
      <button type="button" (click)="removeCategory(c)">
        Remove
      </button>
    </li>
  </ul>
</div>

<div *ngIf="book">
  <label>Add category:</label>

  <select #selectedCategory>
    <option *ngFor="let c of categories" [value]="c.name">
      {{ c.name }}
    </option>
  </select>

  <button
    type="button"
    (click)="addCategory(selectedCategory.value)">
    Add
  </button>
</div>